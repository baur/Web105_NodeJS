/*
импорт модуля node_server_db
*/
var DB = require("node_server_db");
/*
инициируем модуль DB передав имя БД
*/
DB.init("app");
/*
контроллер входящих запросов
*/
const route_handler = {
	index: function(callback, router){
		DB.insert("users",{name: 'user1', login: 'user'}, function(a,b){
			console.log('ok', b);
		});
		router.write('Hello, this is home page!');
		callback("HOME PAGE");
		router.end();
	},
	contacts: function(callback, router){
		router.write('Contact!');
		callback("This is contact page");
		router.end();
	},
	rest: function(callback, router){
		DB.select("users", {}, function(err, res){
			router.write(JSON.stringify(res));
			router.end();
		});
		
	}
};

module.exports = route_handler;
